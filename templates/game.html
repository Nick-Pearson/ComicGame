{% extends "layout.html" %}
{% block content %}

{% raw %}
<div id="game">
  <div v-if="gameInfo == undefined">
    <h1 style="margin-top:25%" class="loading-text">Loading</h1>
  </div>
  <div v-if="gameInfo != undefined">
    <div class="specator-banner" v-if="gameInfo.is_spectator">SPECTATOR</div>
    <div v-if="gameInfo.is_spectator" style="height:50px"></div>
    <div class="overlay-tab" v-if="gameInfo.is_host ">
      <p>Room Code</p>
      <h2 class="room-code">{{ gameInfo.game_id }}</h2>
    </div>

    <div class="game-content">
      <div v-if="gameInfo.state == GameState.STARTING">
        <h2>Waiting for players to join</h2>

        <player-entry
          v-for="player in gameInfo.players"
          v-bind:player="player"
          v-bind:show_score="false"
          v-bind:key="player.id"></player-entry>

        <a v-if="gameInfo.is_host && gameInfo.players.length > 1" href="javascript:void(0);" onclick="StartGameClicked();"><button type="button" class="btn btn-primary btn-large">Start Game</button></a>
      </div>
      <div v-if="gameInfo.state == GameState.DRAWING">
        <div v-if="gameInfo.is_host || gameInfo.is_spectator">
          <h2>Draw some panels!</h2>
          <countdown-clock v-bind:end_time="gameInfo.round_end"></countdown-clock>
        </div>
        <div v-else>
          <countdown-clock class="overlay-tab" style="font-size:2rem;" v-bind:end_time="gameInfo.round_end"></countdown-clock>

          <panel-creator></panel-creator>
        </div>
      </div>
      <div v-if="gameInfo.state == GameState.DISTRIBUTING">
        <h2>Great work!</h2>
        <p>Now let's see what you can make with those panels</p>
      </div>
      <div v-if="gameInfo.state == GameState.CREATING">
        <div v-if="gameInfo.is_host || gameInfo.is_spectator">
          <h2>Make some comics!</h2>
          <countdown-clock v-bind:end_time="gameInfo.round_end"></countdown-clock>
        </div>
        <div v-else>
          <countdown-clock class="overlay-tab" style="font-size:2rem;" v-bind:end_time="gameInfo.round_end"></countdown-clock>
        </div>
      </div>
    </div>

  </div>
</div>

{% endraw %}

{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script type="text/javascript" src="static/scripts/game.js"></script>
{% endblock %}
